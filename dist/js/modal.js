var Modal=function(){function t(t){return document.querySelectorAll(t)}var e=t(".modal__trigger"),n=t(".modal"),o=t(".modal__bg"),i=t(".modal__content"),a=t(".modal__close"),d=window,r=!1,l=400,s=e.length,c=function(t){t.preventDefault();var e=this,n=e.dataset.modal,o=n.length,i=n.substring(1,o),a=document.getElementById(i);m(e,a)},m=function(t,e){var n=document.getElementById("modal__temp");if(null===n){var o=document.createElement("div");o.id="modal__temp",t.appendChild(o),u(t,e,o)}},u=function(t,e,n){var o,i,a,r,s=t.getBoundingClientRect(),c=e,m=c.querySelector(".modal__content").getBoundingClientRect(),u=d.innerWidth/2,_=d.innerHeight/2;t.classList.add("modal__trigger--active"),a=m.width/s.width,r=m.height/s.height,a=a.toFixed(3),r=r.toFixed(3),o=Math.round(u-s.left-s.width/2),i=Math.round(_-s.top-s.height/2),c.classList.contains("modal--align-top")&&(i=Math.round(m.height/2+m.top-s.top-s.height/2)),n.style.transform="scale("+a+","+r+")",n.style.webkitTransform="scale("+a+","+r+")",window.setTimeout(function(){window.requestAnimationFrame(function(){v(c,n)})},l)},v=function(t,e){function n(){e.style.opacity="0",o.removeEventListener("transitionend",n,!1)}if(!r){var o=t.querySelector(".modal__content"),i=document.querySelector("body");i.classList.add("open"),t.classList.add("modal--active"),o.classList.add("modal__content--active"),o.addEventListener("transitionend",n,!1),r=!0}},_=function(t){function o(){setTimeout(function(){window.requestAnimationFrame(function(){d.remove()})},l-50)}t.preventDefault(),t.stopImmediatePropagation();var a=t.target,d=document.getElementById("modal__temp");if(r&&a.classList.contains("modal__bg")||a.classList.contains("modal__close")){d.style.opacity="1";var c=document.querySelector("body");c.classList.remove("open"),d.removeAttribute("style");for(var m=0;m<s;m++)n[m].classList.remove("modal--active"),i[m].classList.remove("modal__content--active"),e[m].style.transform="none",e[m].style.webkitTransform="none",e[m].classList.remove("modal__trigger--active");d.addEventListener("transitionend",o,!1),r=!1}},f=function(){for(var t=0;t<s;t++)e[t].addEventListener("click",c,!1),a[t].addEventListener("click",_,!1),o[t].addEventListener("click",_,!1)},g=function(){f()};return{init:g}}();Modal.init();